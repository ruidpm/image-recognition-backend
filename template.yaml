AWSTemplateFormatVersion: "2010-09-09"
Transform: AWS::Serverless-2016-10-31
Description: Test template

Globals:
  Api:
    EndpointConfiguration: REGIONAL

# Conditions:

# Parameters:

Resources:
  TestLambda:
    Type: AWS::Serverless::Function
    Properties:
      CodeUri: ./dist
      Handler: TestLambda.handler
      Runtime: nodejs12.x
      Timeout: 20
      MemorySize: 128
      Events:
        Test:
          Type: Api
          Properties:
            Path: /test
            Method: get
  
  ImagesBucket:
    Type: AWS::S3::Bucket
    Properties:
      BucketName:
        !Join ["-", ["images-bucket", !Ref "AWS::StackName"]]
      AccessControl: Private
      PublicAccessBlockConfiguration:
        IgnorePublicAcls: true
        BlockPublicPolicy: true
        BlockPublicAcls: true
        RestrictPublicBuckets: true
      BucketEncryption:
        ServerSideEncryptionConfiguration:
          - ServerSideEncryptionByDefault:
              SSEAlgorithm: AES256
    DeletionPolicy: Delete
    UpdateReplacePolicy: Delete